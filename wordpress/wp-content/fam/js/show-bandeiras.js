function GetCountryAbbreviation(e) { var t = e; jQuery(t).each(function (e, t) { var n = t; for (var r = 0, i = n.types.length; r < i; ++r) { var s = n.types[r]; if (s == "country") { var o = n.address_components[0].short_name.toLowerCase(); if (o != null && o.length == 2) { hasFlag = flags.indexOf(o); if (hasFlag == -1) { flags.push(o); var u = "http://www.geonames.org/flags/"; var a = ".gif"; if (flagSize > 45) { u += "x/" } else { u += "m/"; a = ".png" } var f = u + o + a; var l = '<img width="' + flagSize + 'px" class="countryFlag" src="' + f + '">'; jQuery("#travelFlags ul").append("<li>" + l + "</li>") } } } } }) } function pausecomp(e) { var t = new Date; var n = null; do { n = new Date } while (n - t < e) } var flags = new Array; jQuery(document).ready(function () { var e = new google.maps.Geocoder; jQuery("#travelLocations li").each(function () { var t = jQuery(this).html().split(";"); var n = parseFloat(t[0]); var r = parseFloat(t[1]); var i = new google.maps.LatLng(n, r); e.geocode({ latLng: i }, function (t, n) { if (n == google.maps.GeocoderStatus.OK) { if (t[1]) { GetCountryAbbreviation(t) } else { } } else { if (n == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) { pausecomp(200); e.geocode({ latLng: i }, function (e, t) { if (t == google.maps.GeocoderStatus.OK) { if (e[1]) { GetCountryAbbreviation(e) } } }) } } }) }) })