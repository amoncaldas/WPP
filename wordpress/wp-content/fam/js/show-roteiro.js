function SetRoutes(e) { var t = 0; var n = { preserveViewport: true, suppressMarkers: true, routeIndex: t }; var r = new google.maps.DirectionsService; for (t = 0, ltLgLen = e.length; t < ltLgLen; t++) { if (t > 0) { var i = { origin: e[t], destination: e[t - 1], travelMode: google.maps.TravelMode.DRIVING }; var s = new google.maps.DirectionsRenderer(n); s.setMap(map); r.route(i, function (e, t) { console.log(e); if (t == google.maps.DirectionsStatus.OK) { s.setDirections(e) } }) } } } function plotViagemMarkers() { if (typeof roteirosViagem == "object") { jQuery(roteirosViagem).each(function () { var e = this; e.markersViagem = []; e.markersViagemHtml = []; e.markerViagemCounter = 1; var t = -9.622414; var n = -51.780761; var r = new google.maps.LatLng(t, n); var i = { streetViewControl: e.show_controls, mapTypeControl: e.show_controls, center: r, zoom: 3, mapTypeId: google.maps.MapTypeId.ROADMAP, scrollwheel: false }; mapElement = document.getElementById(e.mapa_id); e.mapViagem = new google.maps.Map(mapElement, i); e.mapViagem.setOptions({ zoomControl: e.show_controls }); e.omsviagem = new OverlappingMarkerSpiderfier(e.mapViagem); var s = new google.maps.LatLngBounds; jQuery(e.pontosRoteiroViagem).each(function () { var t = this; var n = "(" + e.markerViagemCounter + ") Local: " + t.local + " | " + "click no ícone para detalhes "; var r = new google.maps.LatLng(t.lat, t.long); var i = new google.maps.Marker({ position: r, map: e.mapViagem, title: n, animation: google.maps.Animation.DROP, icon: "/wp-content/themes/images/icoFam.png" }); e.markersViagem.push(i); if (t.deslocamentoAteAqui == "Ponto inicial da viagem") { t.deslocamentoAteAqui = "<span>Ponto inicial da viagem</span>" } else { t.deslocamentoAteAqui = "Transporte até aqui: <span>" + t.deslocamentoAteAqui + "</span>" } if (t.deslocamentoSaindoDaqui == "Fim do trajeto") { t.deslocamentoSaindoDaqui = "<span>Fim do trajeto</span>" } else { t.deslocamentoSaindoDaqui = "Transporte saindo daqui: <span>" + t.deslocamentoSaindoDaqui + "</span>" } var o = '                <div class="infoWindowMap">                    <div class="viagem_info_small">                        <span class="local_viagem">Local:<span>' + t.local + '</span></span>                        <span class="titulo_viagem"> ' + t.deslocamentoAteAqui + '</span>                        <span class="titulo_viagem"> ' + t.deslocamentoSaindoDaqui + '</span>                        <span class="url_viagem">Data: <span>' + t.data + "</span>                    </div>                </div>"; e.markersViagemHtml.push(o); e.omsviagem.addMarker(i); s.extend(r); e.markerViagemCounter++ }); if (e.show_controls == true) { e.omsviagem.addListener("click", function (t, n) { var r = new google.maps.InfoWindow; var i = GetMarkerViagemHtml(t, e.mapa_id); r.setContent(i); r.open(e.mapViagem, t) }) } e.mapViagem.fitBounds(s); DrawViagemLines(e.mapa_id) }) } } function GetMarkerViagemHtml(e, t) { var n = ""; jQuery(roteirosViagem).each(function () { roteiroViagem = this; if (roteiroViagem.mapa_id == t) { jQuery(roteiroViagem.markersViagem).each(function (t, r) { var i = this; if (i.title == e.title) { n = roteiroViagem.markersViagemHtml[t] } }) } }); return n } function DrawViagemLines(e) { jQuery(roteirosViagem).each(function () { roteiroViagem = this; if (roteiroViagem.mapa_id == e) { jQuery(roteiroViagem.pontosRoteiroViagem).each(function (e, t) { if (e > 0) { var n = new google.maps.LatLng(roteiroViagem.pontosRoteiroViagem[e].lat, roteiroViagem.pontosRoteiroViagem[e].long); var r = new google.maps.LatLng(roteiroViagem.pontosRoteiroViagem[e - 1].lat, roteiroViagem.pontosRoteiroViagem[e - 1].long); var i = [n, r]; var s = new google.maps.Polyline({ path: i, strokeColor: "#660099", strokeOpacity: .6, strokeWeight: 5 }); s.setMap(roteiroViagem.mapViagem) } }) } }) } function plotViagensMarkers() { if (typeof pontosViagem == "object") { var e = -9.622414; var t = -51.780761; var n = { center: new google.maps.LatLng(e, t), zoom: 3, mapTypeId: google.maps.MapTypeId.HYBRID, scrollwheel: false }; var r = document.getElementById("mapa_viagens"); mapViagens = new google.maps.Map(r, n); omsviagens = new OverlappingMarkerSpiderfier(mapViagens); var i = new google.maps.LatLngBounds; jQuery(pontosViagem).each(function () { var e = this; var t = "(" + markerViagensCounter + ") Local: " + e.local + " | " + "click no ícone para detalhes "; var n = new google.maps.LatLng(e.lat, e.long); var r = new google.maps.Marker({ position: n, map: mapViagens, title: t, animation: google.maps.Animation.DROP, icon: "/wp-content/themes/images/icoFam.png" }); markersViagens.push(r); var s = e.tipo == "blog" ? "Post" : "Viagem"; var o = '<div class="infoWindowMap"><div class="imagem_principal"><img src="' + e.imagemViagem + '" /></div><div class="viagem_info"><span class="local_viagem">Local:<span>' + e.local + '</span></span><span class="titulo_viagem"> ' + s + ':<a href="' + e.urlViagem + '">' + e.titulo + "</a></span></span>"; markersViagensHtml.push(o); omsviagens.addMarker(r); i.extend(n); markerViagensCounter++ }); omsviagens.addListener("click", function (e, t) { var n = new google.maps.InfoWindow; var r = GetMarkerViagensHtml(e); n.setContent(r); n.open(mapViagens, e) }); var s = new google.maps.LatLng(10, 0); mapViagens.setCenter(s); mapViagens.setZoom(1) } } function GetMarkerViagensHtml(e) { var t = ""; jQuery(markersViagens).each(function (n, r) { var i = this; if (i.title == e.title) { t = markersViagensHtml[n] } }); return t } var mapViagem; var markersViagens = []; var markerViagensCounter = 1; var markersViagensHtml = []; var markerCounter = 0; var omsviagens; jQuery(document).ready(function () { plotViagemMarkers(); plotViagensMarkers() })